// 絵文字辞書
const emojiDictionary = {
    // 感情系
    '悲しい': '😢', '哀しい': '😢', '泣く': '😭', '涙': '😭',
    '嬉しい': '😊', '幸せ': '😊', '喜び': '😄', '笑顔': '😊', '笑い': '😄', '爆笑': '🤣',
    '怒り': '😠', '怒る': '😠', '激怒': '😡', 'むかつく': '😠',
    '驚き': '😮', '驚く': '😲', 'びっくり': '😲', 'ショック': '😱',
    '恐怖': '😨', '怖い': '😨', 'こわい': '😨', '恐ろしい': '😱',
    '愛': '❤️', '恋': '💕', 'ラブ': '💖', '好き': '💖',
    '眠い': '😴', '眠る': '😴', '寝る': '😴', '疲れ': '😴',
    '考える': '🤔', '思考': '🤔', '悩む': '🤔',
    '困る': '😅', '困った': '😅', '汗': '😅',
    '安心': '😌', 'ほっと': '😌', 'リラックス': '😌',
    
    // 天気系
    '晴れ': '☀️', '太陽': '☀️', '暑い': '🌞', '夏': '🌞',
    '雨': '🌧️', '雨天': '🌧️', '降雨': '🌧️', '梅雨': '🌧️',
    '雪': '❄️', '雪降り': '⛄', '冬': '❄️', '寒い': '🥶',
    '曇り': '☁️', '雲': '☁️', '曇天': '☁️',
    '嵐': '⛈️', '雷': '⚡', '台風': '🌪️', '竜巻': '🌪️',
    '風': '💨', '突風': '💨', '微風': '🍃',
    '虹': '🌈', 'にじ': '🌈',
    '霧': '🌫️', 'きり': '🌫️',
    
    // 動物系
    '犬': '🐕', 'いぬ': '🐕', 'イヌ': '🐕', '子犬': '🐶',
    '猫': '🐱', 'ねこ': '🐱', 'ネコ': '🐱', '子猫': '🐱',
    '鳥': '🐦', 'とり': '🐦', '鶏': '🐔', 'ひよこ': '🐤',
    '魚': '🐟', 'さかな': '🐟', '金魚': '🐠', 'クジラ': '🐋',
    '象': '🐘', 'ゾウ': '🐘', 'キリン': '🦒', 'ライオン': '🦁',
    '熊': '🐻', 'クマ': '🐻', 'パンダ': '🐼',
    '馬': '🐎', 'うま': '🐎', '牛': '🐄', 'うし': '🐄',
    '豚': '🐷', 'ぶた': '🐷', '羊': '🐑', 'ひつじ': '🐑',
    '蝶': '🦋', 'ちょう': '🦋', '蜂': '🐝', 'はち': '🐝',
    '蛇': '🐍', 'へび': '🐍', 'カエル': '🐸', 'かえる': '🐸',
    
    // 食べ物系
    'りんご': '🍎', 'リンゴ': '🍎', 'バナナ': '🍌', 'みかん': '🍊',
    'いちご': '🍓', 'イチゴ': '🍓', 'さくらんぼ': '🍒', 'チェリー': '🍒',
    'パン': '🍞', 'ぱん': '🍞', 'サンドイッチ': '🥪', 'ハンバーガー': '🍔',
    '寿司': '🍣', 'すし': '🍣', 'ピザ': '🍕', 'ラーメン': '🍜',
    'カレー': '🍛', 'ご飯': '🍚', '肉': '🍖', 'ステーキ': '🥩',
    'ケーキ': '🍰', 'アイス': '🍦', 'チョコ': '🍫', 'キャンディ': '🍬',
    'コーヒー': '☕', '茶': '🍵', 'お茶': '🍵', '牛乳': '🥛',
    'ビール': '🍺', 'ワイン': '🍷', '酒': '🍶',
    
    // 自然系
    '山': '⛰️', 'やま': '⛰️', '富士山': '🗻',
    '海': '🌊', 'うみ': '🌊', '波': '🌊', '島': '🏝️',
    '花': '🌸', 'はな': '🌸', '桜': '🌸', 'さくら': '🌸',
    '木': '🌳', 'き': '🌳', '森': '🌲', 'もり': '🌲',
    '草': '🌱', 'くさ': '🌱', 'クローバー': '🍀',
    '星': '⭐', 'ほし': '⭐', '月': '🌙', 'つき': '🌙',
    '地球': '🌍', 'ちきゅう': '🌍', '火': '🔥', 'ひ': '🔥',
    '水': '💧', 'みず': '💧', '滝': '💧',
    
    // スポーツ・活動系
    'サッカー': '⚽', 'サッカーボール': '⚽', 'バスケ': '🏀',
    '野球': '⚾', 'テニス': '🎾', '卓球': '🏓',
    '走る': '🏃', 'ランニング': '🏃', '自転車': '🚴',
    '泳ぐ': '🏊', 'スイミング': '🏊', 'スキー': '🎿',
    
    // 交通系
    '車': '🚗', 'くるま': '🚗', 'バス': '🚌', '電車': '🚆',
    '飛行機': '✈️', 'ひこうき': '✈️', '船': '🚢', 'ふね': '🚢',
    '自転車': '🚲', 'じてんしゃ': '🚲',
    
    // イベント・お祝い系
    'お祝い': '🎉', '祝い': '🎉', 'パーティー': '🎉', '誕生日': '🎂',
    'クリスマス': '🎄', 'お正月': '🎍', '花火': '🎆',
    'プレゼント': '🎁', 'ギフト': '🎁',
    
    // 建物・場所系
    '家': '🏠', 'いえ': '🏠', '学校': '🏫', '病院': '🏥',
    '会社': '🏢', 'オフィス': '🏢', 'ホテル': '🏨',
    '城': '🏰', 'しろ': '🏰',
    
    // 時間系
    '朝': '🌅', 'あさ': '🌅', '夜': '🌃', 'よる': '🌃',
    '夕方': '🌆', 'ゆうがた': '🌆',
    
    // 色系
    '赤': '🔴', 'あか': '🔴', '青': '🔵', 'あお': '🔵',
    '黄色': '🟡', 'きいろ': '🟡', '緑': '🟢', 'みどり': '🟢',
    
    // その他
    '音楽': '🎵', '本': '📖', 'ほん': '📖',
    '電話': '📞', 'でんわ': '📞', 'カメラ': '📷',
    'お金': '💰', 'かね': '💰', '時計': '⏰', 'とけい': '⏰',
    'ハート': '❤️', '王冠': '👑', 'おうかん': '👑'
};

// フォールバック絵文字
const fallbackEmoji = '❓🤔';

// DOM要素の取得
const searchInput = document.getElementById('searchInput');
const searchButton = document.getElementById('searchButton');
const resultDisplay = document.getElementById('result');

// 検索機能
function searchEmojis(inputText) {
    if (!inputText.trim()) {
        return '';
    }
    
    // スペースで区切ってキーワードを分割
    const keywords = inputText.trim().split(/\s+/);
    
    // 各キーワードに対応する絵文字を検索
    const emojis = keywords.map(keyword => {
        const normalizedKeyword = keyword.toLowerCase();
        return emojiDictionary[normalizedKeyword] || fallbackEmoji;
    });
    
    return emojis.join(' ');
}

// 検索実行とUI更新
function performSearch() {
    const inputText = searchInput.value;
    
    if (!inputText.trim()) {
        resultDisplay.textContent = '';
        return;
    }
    
    // ローディング表示
    resultDisplay.textContent = '検索中...';
    resultDisplay.className = 'result-display loading';
    
    // 少し遅延を入れてローディング感を演出
    setTimeout(() => {
        const result = searchEmojis(inputText);
        resultDisplay.textContent = result;
        resultDisplay.className = 'result-display';
    }, 300);
}

// イベントリスナーの設定
searchButton.addEventListener('click', performSearch);

// エンターキーでの検索
searchInput.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
        performSearch();
    }
});

// 入力フィールドにフォーカスを当てる
window.addEventListener('load', function() {
    searchInput.focus();
});

// 入力クリア機能（オプション）
searchInput.addEventListener('input', function() {
    if (this.value === '') {
        resultDisplay.textContent = '';
        resultDisplay.className = 'result-display';
    }
});

// デバッグ用（開発時のみ）
console.log('絵文字検索アプリが読み込まれました');
console.log(`登録されている絵文字の数: ${Object.keys(emojiDictionary).length}`);